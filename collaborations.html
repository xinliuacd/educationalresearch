<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xin Liu • Collaborations</title>
  <meta name="description" content="Xin Liu — international collaborations." />
  <link rel="icon" href="assets/images/profile.png" />
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- Page-only styles (so you don't need to touch style.css) -->
  <style>
    .page-title{
      margin: 52px 0 0;
      text-align: center;
      font-size: 2px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: #111827;
    }
    .page-subtitle{
      margin: 10px 0 0;
      text-align: center;
      color: #6b7280;
      font-size: 14px;
      line-height: 1.8;
    }

    .map-card{
      position: relative;
      max-width: 960px;
      margin: 22px auto 0;
    }
    .world-map{
      width: 100%;
      height: auto;
      display: block;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #fff;
    }
    .map-overlay{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      display:block;
    }

    .network-list-card{
      max-width: 920px;
      margin: 22px auto 0;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 18px 20px;
      background: #fff;
      text-align: center;
    }
    .section-title{
      margin: 0 0 10px;
      font-size: 14px;
      letter-spacing: .20em;
      text-transform: uppercase;
      color: #111827;
    }
    .network-list{
      list-style: none;
      margin: 0;
      padding: 0;
      line-height: 1.9;
      color: #111827;
      font-size: 14px;
    }
    .network-list li{ margin: 2px 0; }

    .footer-note{
      margin-top: 26px;
      color: #6b7280;
      font-size: 12px;
      text-align: center;
    }
  </style>
</head>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xin Liu • Collaborations</title>
  <meta name="description" content="Xin Liu — international collaborations." />
  <link rel="icon" href="assets/images/profile.png" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <main class="wrap">
    <nav class="pillnav" aria-label="Sections">
      <a class="" href="index.html">Home</a>
      <a class="" href="academic career.html">Academic Career</a>
      <a class="" href="projects-and-grants.html">Projects and Grants</a>
      <a class="" href="publications.html">Publications</a>
      <a class="" href="awards.html">Awards</a>
      <a class="" href="presentations.html">Presentations</a>
      <a class="" href="teaching.html">Teaching</a>
      <a class="" href="supervision.html">Supervision</a>
      <a class="" href="academic-service.html">Academic Service</a>
      <a class="active" href="collaborations.html">Collaborations</a>
    </nav>

    <div class="rule" aria-hidden="true"></div>

    <section class="page">
      <h2 class="page-title">COLLABORATIONS</h2>
      <p class="page-subtitle">International collaboration footprint starting from Ningbo, China.</p>

      <div class="map-card" aria-label="Collaboration map">
        <div class="map-wrap" id="mapWrap">
          <!-- ✅ 改这里：换成你自己的世界地图底图文件名/路径 -->
          <img id="worldMap" src="assets/images/map.png" alt="map" />

          <!-- overlay svg -->
          <svg id="mapSvg" aria-hidden="true"></svg>
        </div>
      </div>

      <h3 class="list-title">Key collaboration countries/regions</h3>
      <ul class="collab-list" aria-label="Key collaboration countries/regions list">
        <li>Sweden</li>
        <li>Norway</li>
        <li>Finland</li>
        <li>Belgium</li>
        <li>Germany</li>
        <li>Netherlands</li>
        <li>Portugal</li>
        <li>Serbia</li>
        <li>Estonia</li>
        <li>United Kingdom</li>
        <li>United States</li>
        <li>Singapore</li>
      </ul>
    </section>

    <div class="rule" aria-hidden="true"></div>

    <h2 class="contact-title">Contact</h2>
    <p class="contact-text">Feel free to send me an email<br/>or contact me on social media</p>

    <div class="icons" aria-label="Contact links">
      <a class="icon" href="mailto:liuxin2@nbu.edu.cn" aria-label="Email">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z"/>
        </svg>
      </a>

      <a class="icon" href="https://jsjy.nbu.edu.cn/info/1059/110251.htm" target="_blank" rel="noreferrer" aria-label="Ningbo University Profile">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 3 1 9l11 6 9-4.91V17h2V9L12 3Zm0 14L5 13.2V16c0 2.2 3.1 4 7 4s7-1.8 7-4v-2.8L12 17Z"/>
        </svg>
      </a>

      <a class="icon icon-rg" href="https://www.researchgate.net/profile/Xin-Liu-27" target="_blank" rel="noreferrer" aria-label="ResearchGate">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <text x="12" y="16" text-anchor="middle" font-size="9.5" font-weight="700"
                font-family="system-ui, -apple-system, Segoe UI, Roboto, Arial"
                fill="#6b7280">RG</text>
        </svg>
      </a>

      <a class="icon" href="https://orcid.org/0000-0002-2314-9786" target="_blank" rel="noreferrer" aria-label="ORCID">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M7.2 3.5a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4Zm-2 4h4v13h-4v-13Zm7 0h5.3c4 0 6.5 2.5 6.5 6.5s-2.5 6.5-6.5 6.5H12.2v-13Zm4.9 10.1c1.8 0 3-1.2 3-3.6s-1.2-3.6-3-3.6h-.9v7.2h.9Z"/>
        </svg>
      </a>

      <a class="icon" href="https://www.linkedin.com/in/xin-liu-aa878a110/" target="_blank" rel="noreferrer" aria-label="LinkedIn">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4.98 3.5A2.48 2.48 0 1 1 5 8.46 2.48 2.48 0 0 1 4.98 3.5ZM3 21h4V9H3v12Zm7 0h4v-6.2c0-1.7.03-3.9 2.4-3.9 2.4 0 2.4 1.9 2.4 4V21h4v-6.9c0-4-0.9-7.1-5.6-7.1-2.2 0-3.7 1.2-4.3 2.3h-.1V9h-3.8v12Z"/>
        </svg>
      </a>
    </div>

    <div class="booking">
      <a class="book-btn" href="mailto:liuxin2@nbu.edu.cn?subject=Meeting%20Request%20%7C%20%E9%A2%84%E7%BA%A6%E6%B2%9F%E9%80%9A&body=Hello%20Prof.%20Liu%2C%0A%0AI%20would%20like%20to%20request%20a%20meeting.%20My%20topic%3A%20%5B...%5D.%0APreferred%20time%20slots%3A%20%5B...%5D.%0A%0A%E5%88%98%E8%80%81%E5%B8%88%E6%82%A8%E5%A5%BD%EF%BC%8C%0A%0A%E6%88%91%E6%83%B3%E9%A2%84%E7%BA%A6%E6%B2%9F%E9%80%9A%EF%BC%8C%E4%B8%BB%E9%A2%98%EF%BC%9A%5B...%5D%EF%BC%8C%E5%8F%AF%E9%80%89%E6%97%B6%E9%97%B4%EF%BC%9A%5B...%5D%EF%BC%8C%E8%B0%A2%E8%B0%A2%EF%BC%81"
         aria-label="Book a time / 预约时间">
        <span class="book-en">Request a meeting</span>
        <span class="book-cn">预约交流</span>
      </a>
    </div>

    </p>
    <div class="rule" aria-hidden="true"></div>
    <p class="footer-note"><a href="index.html">Back to Home</a></p>

  </main>

  <script>
    // =========================
    // 关键：这里是“对齐修正”
    // 你的底图有边框/留白，所以要用 bounds 映射“有效地图区域”
    // 如果宁波还是偏到日本：把 left 增大、right 减小（例如 0.06→0.08, 0.94→0.92）
    // =========================
    const MAP_BOUNDS = {
      left: 0.06,   // ✅ 横向留白（越大：点越往中间收）
      right: 0.94,
      top: 0.08,    // ✅ 纵向留白
      bottom: 0.92
    };

    const home = { name: "Ningbo", lat: 29.8683, lon: 121.5440 };

    // 按你要求的顺序（国家顺序），每个国家用一个代表城市坐标做落点
    const points = [
      { country: "Sweden",         city: "Gothenburg",   lat: 57.7089, lon: 11.9746 },
      { country: "Norway",         city: "Oslo",         lat: 59.9139, lon: 10.7522 },
      { country: "Finland",        city: "Helsinki",     lat: 60.1699, lon: 24.9384 },
      { country: "Belgium",        city: "Ghent",        lat: 51.0543, lon: 3.7174  },
      { country: "Germany",        city: "Hamburg",      lat: 53.5511, lon: 9.9937  },
      { country: "Netherlands",    city: "Amsterdam",    lat: 52.3676, lon: 4.9041  },
      { country: "Portugal",       city: "Lisbon",       lat: 38.7223, lon: -9.1393 },
      { country: "Serbia",         city: "Belgrade",     lat: 44.7866, lon: 20.4489 },
      { country: "Estonia",        city: "Tallinn",      lat: 59.4370, lon: 24.7536 },
      { country: "United Kingdom", city: "Reading",      lat: 51.4543, lon: -0.9781 },
      { country: "United States",  city: "Iowa City",    lat: 41.6611, lon: -91.5302},
      { country: "Singapore",      city: "Singapore",    lat: 1.3521,  lon: 103.8198}
    ];

    const img = document.getElementById("worldMap");
    const svg = document.getElementById("mapSvg");

    function project(lon, lat, W, H) {
      const x0 = W * MAP_BOUNDS.left;
      const x1 = W * MAP_BOUNDS.right;
      const y0 = H * MAP_BOUNDS.top;
      const y1 = H * MAP_BOUNDS.bottom;

      const x = x0 + ((lon + 180) / 360) * (x1 - x0);
      const y = y0 + ((90 - lat) / 180) * (y1 - y0);
      return { x, y };
    }

    function clearSvg() {
      while (svg.firstChild) svg.removeChild(svg.firstChild);
    }

    function el(name, attrs = {}) {
      const n = document.createElementNS("http://www.w3.org/2000/svg", name);
      Object.entries(attrs).forEach(([k, v]) => n.setAttribute(k, v));
      return n;
    }

    function draw() {
      const rect = img.getBoundingClientRect();
      const W = rect.width;
      const H = rect.height;

      svg.setAttribute("width", W);
      svg.setAttribute("height", H);
      svg.setAttribute("viewBox", `0 0 ${W} ${H}`);
      svg.setAttribute("preserveAspectRatio", "none");

      clearSvg();

      // defs: arrow marker
      const defs = el("defs");
      const marker = el("marker", {
        id: "arrow",
        markerWidth: "7",
        markerHeight: "7",
        refX: "6",
        refY: "3.5",
        orient: "auto",
        markerUnits: "strokeWidth"
      });
      marker.appendChild(el("path", { d: "M0,0 L7,3.5 L0,7 Z", fill: "#9ca3af" }));
      defs.appendChild(marker);
      svg.appendChild(defs);

      const gLines = el("g");
      const gDots = el("g");
      const gLabels = el("g");

      const pHome = project(home.lon, home.lat, W, H);

      // lines + destination dots
      points.forEach(p => {
        const pDest = project(p.lon, p.lat, W, H);

        // curved path
        const midX = (pHome.x + pDest.x) / 2;
        const lift = Math.max(30, Math.abs(pDest.x - pHome.x) * 0.12);
        const ctrlY = Math.min(pHome.y, pDest.y) - lift;

        const d = `M ${pHome.x} ${pHome.y} Q ${midX} ${ctrlY} ${pDest.x} ${pDest.y}`;
        const path = el("path", {
          d,
          fill: "none",
          stroke: "#b6bcc6",
          "stroke-width": "1.2",
          "stroke-linecap": "round",
          "marker-end": "url(#arrow)",
          opacity: "0.95"
        });
        gLines.appendChild(path);

        const dot = el("circle", {
          cx: pDest.x,
          cy: pDest.y,
          r: "3.2",
          fill: "#374151",
          opacity: "0.95"
        });
        gDots.appendChild(dot);
      });

      // home dot
      const homeDot = el("circle", {
        cx: pHome.x, cy: pHome.y, r: "4.2",
        fill: "#111827"
      });
      gDots.appendChild(homeDot);

      // home label
      const label = el("text", {
        x: pHome.x + 10,
        y: pHome.y - 10,
        fill: "#111827",
        "font-size": "12",
        "font-family": "system-ui, -apple-system, Segoe UI, Roboto, Arial"
      });
      label.textContent = "Ningbo";
      gLabels.appendChild(label);

      svg.appendChild(gLines);
      svg.appendChild(gDots);
      svg.appendChild(gLabels);
    }

    function ready() {
      draw();
      window.addEventListener("resize", draw);
    }

    if (img.complete) ready();
    else img.addEventListener("load", ready);
  </script>

</body>
</html>
